<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Notificaciones de Gol</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
        }

        body {
            background-color: #f5f5f5;
            min-height: 100vh;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 480px;
            background-color: white;
            min-height: 100vh;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
        }

        .header {
            background-color: #1a5f1a;
            color: white;
            padding: 24px 20px;
            border-bottom-left-radius: 24px;
            border-bottom-right-radius: 24px;
        }

        .header h1 {
            font-size: 28px;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .header h2 {
            font-size: 16px;
            font-weight: 400;
            opacity: 0.9;
        }

        .countries-list {
            padding: 8px 20px;
            flex: 1;
        }

        .country-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .country-name {
            font-size: 18px;
            font-weight: 400;
            color: #000;
        }

        /* iOS Toggle Switch - con color naranja #ff5900 */
        .ios-toggle {
            position: relative;
            display: inline-block;
            width: 51px;
            height: 31px;
        }

        .ios-toggle input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #e9e9ea;
            transition: .3s;
            border-radius: 31px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 29px;
            width: 29px;
            left: 1px;
            bottom: 1px;
            background-color: white;
            transition: .3s;
            border-radius: 50%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        /* Color naranja cuando está activado */
        input:checked + .toggle-slider {
            background-color: #ff5900;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(20px);
        }

        /* Footer con botón guardar */
        .footer {
            padding: 20px;
            border-top: 1px solid #e0e0e0;
            background-color: white;
        }

        .save-button {
            width: 100%;
            padding: 16px;
            background-color: #ff5900;
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            -webkit-tap-highlight-color: transparent;
            box-shadow: 0 4px 6px rgba(26, 95, 26, 0.25);
        }

        .save-button:active {
            transform: scale(0.98);
            background-color: #134613;
            box-shadow: 0 2px 4px rgba(26, 95, 26, 0.25);
        }

        /* Mensaje de éxito */
        .success-message {
            text-align: center;
            padding: 10px;
            background-color: #ff5900;
            color: white;
            border-radius: 8px;
            margin-bottom: 15px;
            font-size: 14px;
            display: none;
        }

        .success-message.show {
            display: block;
        }

        /* Touch improvements */
        @media (hover: none) and (pointer: coarse) {
            .country-item {
                padding: 16px 0;
            }
            
            .country-name {
                font-size: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>⚽ Notificaciones de Gol</h1>
            <h2>Selecciona tus equipos</h2>
        </div>
        
        <div class="countries-list" id="countriesList">
            <!-- Los países se agregarán aquí dinámicamente con JavaScript -->
        </div>

        <div class="footer">
            <div class="success-message" id="successMessage">
                ✅ Preferencias guardadas correctamente
            </div>
            <button class="save-button" id="saveButton">
                Guardar preferencias
            </button>
        </div>
    </div>

    <script>
        const countries = [
            "México",
            "Estados Unidos", 
            "Canadá",
            "Argentina",
            "Brasil",
            "Francia",
            "Colombia",
            "Inglaterra",
            "Países Bajos",
            "Suecia"
        ];

        // Cargar estado guardado o inicializar nuevo
        let activeStates = JSON.parse(localStorage.getItem('activeCountries')) || {};

        function renderCountries() {
            const listElement = document.getElementById('countriesList');
            listElement.innerHTML = '';

            countries.forEach(country => {
                const isActive = activeStates[country] || false;
                
                const itemDiv = document.createElement('div');
                itemDiv.className = 'country-item';

                const nameSpan = document.createElement('span');
                nameSpan.className = 'country-name';
                nameSpan.textContent = country;

                // iOS Style Toggle
                const toggleLabel = document.createElement('label');
                toggleLabel.className = 'ios-toggle';
                
                const toggleInput = document.createElement('input');
                toggleInput.type = 'checkbox';
                toggleInput.checked = isActive;
                
                // Guardar referencia al país en el input
                toggleInput.dataset.country = country;
                
                const sliderSpan = document.createElement('span');
                sliderSpan.className = 'toggle-slider';
                
                toggleLabel.appendChild(toggleInput);
                toggleLabel.appendChild(sliderSpan);

                // Event listener para cambios individuales
                toggleInput.addEventListener('change', function(e) {
                    // Actualizamos el estado pero no guardamos aún
                    activeStates[this.dataset.country] = this.checked;
                });

                itemDiv.appendChild(nameSpan);
                itemDiv.appendChild(toggleLabel);
                listElement.appendChild(itemDiv);
            });
        }

        // Función para guardar preferencias
        function savePreferences() {
            // Guardar en localStorage
            localStorage.setItem('activeCountries', JSON.stringify(activeStates));
            
            // Mostrar mensaje de éxito
            const successMsg = document.getElementById('successMessage');
            successMsg.classList.add('show');
            
            // Ocultar mensaje después de 2 segundos
            setTimeout(() => {
                successMsg.classList.remove('show');
            }, 2000);
            
            // Feedback háptico (vibración) si el dispositivo lo soporta
            if (window.navigator && window.navigator.vibrate) {
                window.navigator.vibrate(50);
            }
            
            console.log('Preferencias guardadas:', activeStates);
        }

        // Inicializar la lista
        renderCountries();

        // Event listener para botón guardar
        document.getElementById('saveButton').addEventListener('click', savePreferences);

        // Opcional: Guardar con gesto de deslizar hacia abajo (pull to save)
        let touchStartY = 0;
        document.addEventListener('touchstart', function(e) {
            touchStartY = e.touches[0].clientY;
        }, { passive: true });

        document.addEventListener('touchend', function(e) {
            const touchEndY = e.changedTouches[0].clientY;
            const scrollTop = document.documentElement.scrollTop;
            
            // Si está en la parte superior y desliza hacia abajo
            if (scrollTop === 0 && touchEndY > touchStartY + 100) {
                savePreferences();
            }
        });
    </script>
</body>
</html>